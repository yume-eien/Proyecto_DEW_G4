<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Análisis de Community Setters - Infinity Ascend Software">
    <title>Análisis de Setters | Infinity Ascend Software</title>
    <link rel="stylesheet" href="/assets/css/admin.css">
    <link rel="icon" href="/assets/img/logos/favicon.ico" type="image/x-icon">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body class="admin-body">
    <div id="admin-app" class="admin-app">
        <!-- Sidebar de navegación -->
        <aside class="admin-sidebar">
            <div class="sidebar-header">
                <div class="admin-logo">
                    <a href="/admin/index.html">
                        <img src="/assets/img/logos/infinity-ascend-logo.svg" alt="Infinity Ascend Software" class="logo-img">
                    </a>
                </div>
                <button class="sidebar-toggle">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg>
                </button>
            </div>
            
            <nav class="sidebar-nav">
                <ul class="nav-list">
                    <li class="nav-item">
                        <a href="/admin/index.html" class="nav-link">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path><polyline points="9 22 9 12 15 12 15 22"></polyline></svg>
                            <span>Dashboard</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="/admin/sales/index.html" class="nav-link">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="22 12 16 12 14 15 10 15 8 12 2 12"></polyline><path d="M5.45 5.11L2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z"></path></svg>
                            <span>Ventas</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="/admin/products/index.html" class="nav-link">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"></path></svg>
                            <span>Productos</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="/admin/setters/index.html" class="nav-link active">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path><circle cx="9" cy="7" r="4"></circle><path d="M23 21v-2a4 4 0 0 0-3-3.87"></path><path d="M16 3.13a4 4 0 0 1 0 7.75"></path></svg>
                            <span>Community Setters</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="/admin/settings/general.html" class="nav-link">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="3"></circle><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path></svg>
                            <span>Configuración</span>
                        </a>
                    </li>
                </ul>
            </nav>
            
            <div class="sidebar-footer">
                <a href="#" class="logout-link" id="logout-btn">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path><polyline points="16 17 21 12 16 7"></polyline><line x1="21" y1="12" x2="9" y2="12"></line></svg>
                    <span>Cerrar Sesión</span>
                </a>
            </div>
        </aside>

        <!-- Contenido principal -->
        <main class="admin-content">
            <header class="admin-header">
                <div class="header-left">
                    <h1 class="page-title">Análisis de Community Setters</h1>
                </div>
                <div class="header-right">
                    <div class="period-filters">
                        <button class="period-filter" data-period="day">Hoy</button>
                        <button class="period-filter" data-period="week">Semana</button>
                        <button class="period-filter active" data-period="month">Mes</button>
                        <button class="period-filter" data-period="year">Año</button>
                        <button class="period-filter" data-period="custom">Personalizado</button>
                    </div>
                    <div class="admin-profile">
                        <img src="/assets/img/admin/avatar.jpg" alt="Admin" class="admin-avatar">
                        <div class="admin-info">
                            <span class="admin-name">Admin</span>
                            <span class="admin-role">Administrador</span>
                        </div>
                    </div>
                </div>
            </header>

            <div class="admin-dashboard">
                <!-- Filtros específicos de la página -->
                <section class="analytics-filters">
                    <div class="filters-grid">
                        <div class="filter-container">
                            <select id="setter-selector" class="form-select">
                                <option value="all">Todos los setters</option>
                                <option value="STR-001">Maria Rodriguez</option>
                                <option value="STR-002">Carlos Mendez</option>
                                <option value="STR-003">Sarah Johnson</option>
                                <option value="STR-004">Michael Chen</option>
                                <option value="STR-005">Lisa Patel</option>
                            </select>
                        </div>
                        <div class="filter-container">
                            <select id="product-selector" class="form-select">
                                <option value="all">Todos los productos</option>
                                <option value="autoflow">Autoflow</option>
                                <option value="bulletproof">BulletProof</option>
                            </select>
                        </div>
                        <div class="filter-container">
                            <div class="date-range-picker">
                                <input type="date" id="start-date" class="form-input">
                                <span>a</span>
                                <input type="date" id="end-date" class="form-input">
                            </div>
                        </div>
                        <div class="filter-actions">
                            <button id="apply-filters" class="btn btn-primary">Aplicar Filtros</button>
                            <button id="reset-filters" class="btn btn-outline">Restablecer</button>
                        </div>
                    </div>
                </section>

                <!-- Gráficos de análisis -->
                <section class="analytics-charts">
                    <div class="charts-grid">
                        <!-- Gráfico de ventas mensuales -->
                        <div class="chart-card">
                            <h3 class="chart-title">Ventas Mensuales por Setter</h3>
                            <div class="chart-container">
                                <canvas id="monthly-sales-chart"></canvas>
                            </div>
                        </div>
                        
                        <!-- Gráfico de distribución de ventas por producto -->
                        <div class="chart-card">
                            <h3 class="chart-title">Distribución de Ventas por Producto</h3>
                            <div class="chart-container">
                                <canvas id="product-distribution-chart"></canvas>
                            </div>
                        </div>
                        
                        <!-- Gráfico de rendimiento de setters -->
                        <div class="chart-card">
                            <h3 class="chart-title">Rendimiento de Setters (Ventas vs. Conversión)</h3>
                            <div class="chart-container">
                                <canvas id="setter-performance-chart"></canvas>
                            </div>
                        </div>
                        
                        <!-- Gráfico de tendencia de comisiones -->
                        <div class="chart-card">
                            <h3 class="chart-title">Tendencia de Comisiones</h3>
                            <div class="chart-container">
                                <canvas id="commission-trend-chart"></canvas>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Métricas detalladas -->
                <section class="detailed-metrics">
                    <h2 class="section-title">Métricas Detalladas</h2>
                    <div class="metrics-grid">
                        <div class="metric-card">
                            <div class="metric-header">
                                <h3 class="metric-title">Tasa de Conversión</h3>
                                <div class="metric-info">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="16" x2="12" y2="12"></line><line x1="12" y1="8" x2="12.01" y2="8"></line></svg>
                                </div>
                            </div>
                            <div class="metric-content">
                                <div class="metric-value">4.2%</div>
                                <div class="metric-change positive">+0.8% vs periodo anterior</div>
                                <div class="metric-description">
                                    <p>Porcentaje de visitantes que realizan una compra a través de links de setter.</p>
                                </div>
                            </div>
                        </div>
                        <div class="metric-card">
                            <div class="metric-header">
                                <h3 class="metric-title">Valor Promedio de Venta</h3>
                                <div class="metric-info">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="16" x2="12" y2="12"></line><line x1="12" y1="8" x2="12.01" y2="8"></line></svg>
                                </div>
                            </div>
                            <div class="metric-content">
                                <div class="metric-value">$49.72</div>
                                <div class="metric-change positive">+$2.35 vs periodo anterior</div>
                                <div class="metric-description">
                                    <p>Valor promedio de cada venta realizada a través de setter.</p>
                                </div>
                            </div>
                        </div>
                        <div class="metric-card">
                            <div class="metric-header">
                                <h3 class="metric-title">Setters Activos</h3>
                                <div class="metric-info">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="16" x2="12" y2="12"></line><line x1="12" y1="8" x2="12.01" y2="8"></line></svg>
                                </div>
                            </div>
                            <div class="metric-content">
                                <div class="metric-value">78.6%</div>
                                <div class="metric-change positive">+5.2% vs periodo anterior</div>
                                <div class="metric-description">
                                    <p>Porcentaje de setters registrados que han generado al menos una venta en el periodo.</p>
                                </div>
                            </div>
                        </div>
                        <div class="metric-card">
                            <div class="metric-header">
                                <h3 class="metric-title">ROI de Programa</h3>
                                <div class="metric-info">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="16" x2="12" y2="12"></line><line x1="12" y1="8" x2="12.01" y2="8"></line></svg>
                                </div>
                            </div>
                            <div class="metric-content">
                                <div class="metric-value">430%</div>
                                <div class="metric-change positive">+45% vs periodo anterior</div>
                                <div class="metric-description">
                                    <p>Retorno de inversión del programa de community setters (ingresos vs costos).</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Tabla de rendimiento del top 10 -->
                <section class="top-performers-section">
                    <h2 class="section-title">Top 10 Setters por Rendimiento</h2>
                    <div class="table-responsive">
                        <table class="admin-table" id="top-performers-table">
                            <thead>
                                <tr>
                                    <th>Posición</th>
                                    <th>Nombre</th>
                                    <th>Ventas</th>
                                    <th>Ingresos</th>
                                    <th>Comisiones</th>
                                    <th>Conversión</th>
                                    <th>Valor Promedio</th>
                                    <th>Productos Principales</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>1</td>
                                    <td>Maria Rodriguez</td>
                                    <td>42</td>
                                    <td>$2,089.58</td>
                                    <td>$208.96</td>
                                    <td>5.8%</td>
                                    <td>$49.75</td>
                                    <td>Autoflow (65%), BulletProof (35%)</td>
                                </tr>
                                <tr>
                                    <td>2</td>
                                    <td>Carlos Mendez</td>
                                    <td>37</td>
                                    <td>$1,849.63</td>
                                    <td>$184.96</td>
                                    <td>4.9%</td>
                                    <td>$49.99</td>
                                    <td>Autoflow (75%), BulletProof (25%)</td>
                                </tr>
                                <tr>
                                    <td>3</td>
                                    <td>Sarah Johnson</td>
                                    <td>28</td>
                                    <td>$1,399.72</td>
                                    <td>$139.97</td>
                                    <td>4.2%</td>
                                    <td>$49.99</td>
                                    <td>Autoflow (60%), BulletProof (40%)</td>
                                </tr>
                                <tr>
                                    <td>4</td>
                                    <td>Michael Chen</td>
                                    <td>22</td>
                                    <td>$1,089.78</td>
                                    <td>$108.98</td>
                                    <td>3.7%</td>
                                    <td>$49.53</td>
                                    <td>Autoflow (55%), BulletProof (45%)</td>
                                </tr>
                                <tr>
                                    <td>5</td>
                                    <td>Lisa Patel</td>
                                    <td>18</td>
                                    <td>$879.82</td>
                                    <td>$87.98</td>
                                    <td>3.5%</td>
                                    <td>$48.88</td>
                                    <td>BulletProof (65%), Autoflow (35%)</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div class="table-actions">
                        <button class="btn btn-outline">Ver Todos los Setters</button>
                        <button class="btn btn-primary">Exportar Datos</button>
                    </div>
                </section>

                <!-- Recomendaciones -->
                <section class="recommendations-section">
                    <h2 class="section-title">Recomendaciones</h2>
                    <div class="recommendations-list">
                        <div class="recommendation-card">
                            <div class="recommendation-icon">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path><polyline points="22 4 12 14.01 9 11.01"></polyline></svg>
                            </div>
                            <div class="recommendation-content">
                                <h3 class="recommendation-title">Incrementar Comisiones para Top 5 Setters</h3>
                                <p class="recommendation-text">Los 5 mejores setters están generando el 60% de las ventas. Considerar aumentar su comisión en un 2-3% para incentivar aún más ventas.</p>
                                <button class="btn btn-outline btn-sm">Implementar</button>
                            </div>
                        </div>
                        <div class="recommendation-card">
                            <div class="recommendation-icon">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21.21 15.89A10 10 0 1 1 8 2.83"></path><path d="M22 12A10 10 0 0 0 12 2v10z"></path></svg>
                            </div>
                            <div class="recommendation-content">
                                <h3 class="recommendation-title">Promoción para BulletProof</h3>
                                <p class="recommendation-text">La mayoría de los setters están enfocados en Autoflow. Crear una promoción temporal específica para BulletProof podría equilibrar las ventas.</p>
                                <button class="btn btn-outline btn-sm">Implementar</button>
                            </div>
                        </div>
                        <div class="recommendation-card">
                            <div class="recommendation-icon">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path><circle cx="8.5" cy="7" r="4"></circle><line x1="20" y1="8" x2="20" y2="14"></line><line x1="23" y1="11" x2="17" y2="11"></line></svg>
                            </div>
                            <div class="recommendation-content">
                                <h3 class="recommendation-title">Programa de Capacitación para Nuevos Setters</h3>
                                <p class="recommendation-text">El 35% de los setters tienen tasa de conversión menor al 2%. Implementar un programa de capacitación podría mejorar su rendimiento.</p>
                                <button class="btn btn-outline btn-sm">Implementar</button>
                            </div>
                        </div>
                    </div>
                </section>
            </div>
        </main>
    </div>

    <!-- Scripts -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Configurar eventos para la navegación móvil
            const sidebarToggle = document.querySelector('.sidebar-toggle');
            const adminApp = document.getElementById('admin-app');
            
            if (sidebarToggle && adminApp) {
                sidebarToggle.addEventListener('click', function() {
                    adminApp.classList.toggle('sidebar-collapsed');
                });
            }
            
            // Configurar cerrar sesión
            const logoutButton = document.getElementById('logout-btn');
            
            if (logoutButton) {
                logoutButton.addEventListener('click', function(e) {
                    e.preventDefault();
                    
                    // Eliminar el flag de autenticación
                    localStorage.removeItem('admin_authenticated');
                    
                    // Redirigir a la página de login
                    window.location.href = '/admin/login.html';
                });
            }
            
            // Gráfico de ventas mensuales
            const monthlySalesCtx = document.getElementById('monthly-sales-chart');
            if (monthlySalesCtx) {
                const monthlySalesData = {
                    labels: ['Ene', 'Feb', 'Mar', 'Abr', 'May'],
                    datasets: [
                        {
                            label: 'Maria Rodriguez',
                            data: [5, 8, 10, 12, 7],
                            borderColor: 'rgba(0, 119, 255, 1)',
                            backgroundColor: 'rgba(0, 119, 255, 0.1)',
                            tension: 0.4
                        },
                        {
                            label: 'Carlos Mendez',
                            data: [3, 6, 9, 8, 11],
                            borderColor: 'rgba(0, 204, 102, 1)',
                            backgroundColor: 'rgba(0, 204, 102, 0.1)',
                            tension: 0.4
                        },
                        {
                            label: 'Sarah Johnson',
                            data: [2, 4, 7, 6, 9],
                            borderColor: 'rgba(255, 102, 0, 1)',
                            backgroundColor: 'rgba(255, 102, 0, 0.1)',
                            tension: 0.4
                        }
                    ]
                };
                
                new Chart(monthlySalesCtx, {
                    type: 'line',
                    data: monthlySalesData,
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                position: 'top',
                            }
                        },
                        scales: {
                            y: {
                                beginAtZero: true,
                                title: {
                                    display: true,
                                    text: 'Ventas'
                                }
                            },
                            x: {
                                title: {
                                    display: true,
                                    text: 'Mes'
                                }
                            }
                        }
                    }
                });
            }
            
            // Gráfico de distribución por producto
            const productDistributionCtx = document.getElementById('product-distribution-chart');
            if (productDistributionCtx) {
                const productDistributionData = {
                    labels: ['Autoflow', 'BulletProof'],
                    datasets: [{
                        data: [65, 35],
                        backgroundColor: [
                            'rgba(0, 119, 255, 0.8)',
                            'rgba(0, 204, 102, 0.8)'
                        ],
                        borderWidth: 0
                    }]
                };
                
                new Chart(productDistributionCtx, {
                    type: 'doughnut',
                    data: productDistributionData,
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                position: 'bottom'
                            }
                        }
                    }
                });
            }
            
            // Gráfico de rendimiento de setters
            const setterPerformanceCtx = document.getElementById('setter-performance-chart');
            if (setterPerformanceCtx) {
                const setterPerformanceData = {
                    datasets: [{
                        label: 'Rendimiento de Setters',
                        data: [
                            { x: 5.8, y: 42, r: 15, setter: 'Maria Rodriguez' },
                            { x: 4.9, y: 37, r: 14, setter: 'Carlos Mendez' },
                            { x: 4.2, y: 28, r: 13, setter: 'Sarah Johnson' },
                            { x: 3.7, y: 22, r: 12, setter: 'Michael Chen' },
                            { x: 3.5, y: 18, r: 11, setter: 'Lisa Patel' }
                        ],
                        backgroundColor: 'rgba(0, 119, 255, 0.6)'
                    }]
                };
                
                new Chart(setterPerformanceCtx, {
                    type: 'bubble',
                    data: setterPerformanceData,
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        scales: {
                            y: {
                                title: {
                                    display: true,
                                    text: 'Ventas'
                                }
                            },
                            x: {
                                title: {
                                    display: true,
                                    text: 'Tasa de Conversión (%)'
                                }
                            }
                        },
                        plugins: {
                            tooltip: {
                                callbacks: {
                                    label: function(context) {
                                        return context.raw.setter + ': ' + context.raw.y + ' ventas, ' + context.raw.x + '% conversión';
                                    }
                                }
                            }
                        }
                    }
                });
            }
            
            // Gráfico de tendencia de comisiones
            const commissionTrendCtx = document.getElementById('commission-trend-chart');
            if (commissionTrendCtx) {
                const commissionTrendData = {
                    labels: ['Ene', 'Feb', 'Mar', 'Abr', 'May'],
                    datasets: [{
                        label: 'Comisiones Pagadas',
                        data: [850, 1100, 1350, 1650, 2090],
                        borderColor: 'rgba(0, 119, 255, 1)',
                        backgroundColor: 'rgba(0, 119, 255, 0.1)',
                        tension: 0.4,
                        fill: true,
                        yAxisID: 'y'
                    }, {
                        label: 'Tasa de Comisión Promedio (%)',
                        data: [8, 9, 9.5, 10, 10],
                        borderColor: 'rgba(255, 99, 132, 1)',
                        borderDash: [5, 5],
                        tension: 0.4,
                        yAxisID: 'y1'
                    }]
                };
                
                new Chart(commissionTrendCtx, {
                    type: 'line',
                    data: commissionTrendData,
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        scales: {
                            y: {
                                beginAtZero: true,
                                title: {
                                    display: true,
                                    text: 'Comisiones Pagadas ($)'
                                },
                                position: 'left'
                            },
                            y1: {
                                beginAtZero: true,
                                title: {
                                    display: true,
                                    text: 'Tasa de Comisión (%)'
                                },
                                position: 'right',
                                grid: {
                                    drawOnChartArea: false
                                },
                                min: 0,
                                max: 20
                            }
                        }
                    }
                });
            }
            
            // Configurar filtros
            const applyFiltersBtn = document.getElementById('apply-filters');
            if (applyFiltersBtn) {
                applyFiltersBtn.addEventListener('click', function() {
                    const setter = document.getElementById('setter-selector').value;
                    const product = document.getElementById('product-selector').value;
                    const startDate = document.getElementById('start-date').value;
                    const endDate = document.getElementById('end-date').value;
                    
                    // En un entorno real, aquí se recargarían los gráficos y datos con AJAX
                    alert(`Filtros aplicados:\nSetter: ${setter}\nProducto: ${product}\nFecha Inicio: ${startDate}\nFecha Fin: ${endDate}`);
                });
            }
            
            const resetFiltersBtn = document.getElementById('reset-filters');
            if (resetFiltersBtn) {
                resetFiltersBtn.addEventListener('click', function() {
                    document.getElementById('setter-selector').value = 'all';
                    document.getElementById('product-selector').value = 'all';
                    document.getElementById('start-date').value = '';
                    document.getElementById('end-date').value = '';
                    
                    // En un entorno real, aquí se recargarían los gráficos y datos con AJAX
                    alert('Filtros restablecidos');
                });
            }
        });
    </script>
</body>
</html>